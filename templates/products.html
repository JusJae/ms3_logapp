{% extends "index.html" %} {% block content %}

<h3 class="page-title mt-3 text-center">Product Log</h3>

<div class="">
	<form
		action="{{ url_for('search') }}"
		method="POST">
		<div class="input-group mb-2 pl-0">
			<input
				class="form-control my-0 py-1"
				type="text"
				name="query"
				id="query"
				minlength="3"
				maxlength="50"
				class="validate"
				placeholder="Search"
				aria-label="Search"
				required />
			<label for="query"></label>
			<button
				class="btn btn-warning btn-sm my-0 p"
				type="submit">
				<i class="fas fa-search"></i>
			</button>
		</div>
		<div class="container flex-grow-1 w-25">
			<div class="row justify-content-around">
				<a
					href="{{ url_for('products') }}"
					class="col btn btn-danger text-shadow"
					>Reset</a
				>
			</div>
		</div>
	</form>
</div>

<!-- Products Grid -->
<!-- Add product button -->
<div class="container py-4 flex-grow-1">
	<div class="add-btn row justify-content-around m-4">
		<a
			href="{{ url_for('add_product')}}"
			class="btn btn-primary text-shadow"
			>Add Product</a
		>
	</div>
	<!-- User Products Grid -->
	<div class="row row-cols-1 row-cols-md-3 g-4">
		{% for product in products %}
		<div class="col">
			<div class="card h-100 product-card">
				<img
					src="{{ product.image_url }}"
					class="card-img-top product-image"
					alt="{{ product.product_name }}" />
				<div class="card-body">
					<h5 class="card-title">{{ product.product_name }}</h5>
					<p class="card-text">{{ product.date_added }}</p>
				</div>
				{% if session.user|lower == products.created_by|lower %}
				<div class="card-footer">
					<a
						class="btn btn-primary"
						href="{{ url_for('edit_product', product_id=product._id) }}"
						><i class="fas fa-edit"></i
					></a>
					<a
						class="btn btn-danger"
						href="{{ url_for('delete_product', product_id=product._id) }}"
						><i class="fas fa-trash"></i
					></a>
					<button
						class="btn btn-info"
						onclick="showDescription('{{ product.id }}')">
						<i class="fas fa-info"></i>
					</button>
				</div>
				{% endif %}
			</div>
		</div>
		{% endfor %}
	</div>
</div>

{% endblock %}
